define("common:widget/view/parseobj.js",function(e,t){var r=e("common:widget/lib/three.js"),n={parse:function(e){function t(e){var t=parseInt(e);return 3*(t>=0?t-1:t+c.length/3)}function n(e){var t=parseInt(e);return 3*(t>=0?t-1:t+f.length/3)}function a(e){var t=parseInt(e);return 2*(t>=0?t-1:t+p.length/2)}function d(e,t,r){i.vertices.push(c[e],c[e+1],c[e+2],c[t],c[t+1],c[t+2],c[r],c[r+1],c[r+2])}function s(e,t,r){i.normals.push(f[e],f[e+1],f[e+2],f[t],f[t+1],f[t+2],f[r],f[r+1],f[r+2])}function o(e,t,r){i.uvs.push(p[e],p[e+1],p[t],p[t+1],p[r],p[r+1])}function l(e,r,l,u,i,v,m,c,f,p,E,h){var g,b=t(e),w=t(r),F=t(l);void 0===u?d(b,w,F):(g=t(u),d(b,w,g),d(w,F,g)),void 0!==i&&(b=a(i),w=a(v),F=a(m),void 0===u?o(b,w,F):(g=a(c),o(b,w,g),o(w,F,g))),void 0!==f&&(b=n(f),w=n(p),F=n(E),void 0===u?s(b,w,F):(g=n(h),s(b,w,g),s(w,F,g)))}var u,i,v,m=[];/^o /gm.test(e)===!1&&(i={vertices:[],normals:[],uvs:[]},v={name:""},u={name:"",geometry:i,material:v},m.push(u));for(var c=[],f=[],p=[],E=/v( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,h=/vn( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,g=/vt( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,b=/f( +-?\d+)( +-?\d+)( +-?\d+)( +-?\d+)?/,w=/f( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))?/,F=/f( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))?/,A=/f( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))?/,x=e.split("\n"),y=0;y<x.length;y++){var H=x[y];H=H.trim();var R;0!==H.length&&"#"!==H.charAt(0)&&(null!==(R=E.exec(H))?c.push(parseFloat(R[1]),parseFloat(R[2]),parseFloat(R[3])):null!==(R=h.exec(H))?f.push(parseFloat(R[1]),parseFloat(R[2]),parseFloat(R[3])):null!==(R=g.exec(H))?p.push(parseFloat(R[1]),parseFloat(R[2])):null!==(R=b.exec(H))?l(R[1],R[2],R[3],R[4]):null!==(R=w.exec(H))?l(R[2],R[5],R[8],R[11],R[3],R[6],R[9],R[12]):null!==(R=F.exec(H))?l(R[2],R[6],R[10],R[14],R[3],R[7],R[11],R[15],R[4],R[8],R[12],R[16]):null!==(R=A.exec(H))?l(R[2],R[5],R[8],R[11],void 0,void 0,void 0,void 0,R[3],R[6],R[9],R[12]):/^o /.test(H)?(i={vertices:[],normals:[],uvs:[]},v={name:""},u={name:H.substring(2).trim(),geometry:i,material:v},m.push(u)):/^g /.test(H)||(/^usemtl /.test(H)?v.name=H.substring(7).trim():/^mtllib /.test(H)||/^s /.test(H)))}for(var T=new r.THREE.Object3D,y=0,j=m.length;j>y;y++){u=m[y],i=u.geometry;var B=new r.THREE.BufferGeometry;B.addAttribute("position",new r.THREE.BufferAttribute(new Float32Array(i.vertices),3)),i.normals.length>0&&B.addAttribute("normal",new r.THREE.BufferAttribute(new Float32Array(i.normals),3)),i.uvs.length>0&&B.addAttribute("uv",new r.THREE.BufferAttribute(new Float32Array(i.uvs),2)),v=new r.THREE.MeshLambertMaterial,v.name=u.material.name;var I=new r.THREE.Mesh(B,v);I.name=u.name,T.add(I)}return T}};t.parseobj=n});