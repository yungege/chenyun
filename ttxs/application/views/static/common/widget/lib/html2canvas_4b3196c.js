define("common:widget/lib/html2canvas.js",function(t,e){"use strict";function n(t,e,n){var r,o=t.runtimeStyle&&t.runtimeStyle[e],a=t.style;return!/^-?[0-9]+\.?[0-9]*(?:px)?$/i.test(n)&&/^-?\d/.test(n)&&(r=a.left,o&&(t.runtimeStyle.left=t.currentStyle.left),a.left="fontSize"===e?"1em":n||0,n=a.pixelLeft+"px",a.left=r,o&&(t.runtimeStyle.left=o)),/^(thin|medium|thick)$/i.test(n)?n:Math.round(parseFloat(n))+"px"}function r(t){return parseInt(t,10)}function o(t,e,r,o){if(t=(t||"").split(","),t=t[o||0]||t[0]||"auto",t=u.Util.trimText(t).split(" "),"backgroundSize"!==r||t[0]&&!t[0].match(/cover|contain|auto/)){if(t[0]=-1===t[0].indexOf("%")?n(e,r+"X",t[0]):t[0],void 0===t[1]){if("backgroundSize"===r)return t[1]="auto",t;t[1]=t[0]}t[1]=-1===t[1].indexOf("%")?n(e,r+"Y",t[1]):t[1]}else;return t}function a(t,e,n,r,o,a){var i,l,s,c,d=u.Util.getCSS(e,t,o);if(1===d.length&&(c=d[0],d=[],d[0]=c,d[1]=c),-1!==d[0].toString().indexOf("%"))s=parseFloat(d[0])/100,l=n.width*s,"backgroundSize"!==t&&(l-=(a||r).width*s);else if("backgroundSize"===t)if("auto"===d[0])l=r.width;else if(/contain|cover/.test(d[0])){var h=u.Util.resizeBounds(r.width,r.height,n.width,n.height,d[0]);l=h.width,i=h.height}else l=parseInt(d[0],10);else l=parseInt(d[0],10);return"auto"===d[1]?i=l/r.width*r.height:-1!==d[1].toString().indexOf("%")?(s=parseFloat(d[1])/100,i=n.height*s,"backgroundSize"!==t&&(i-=(a||r).height*s)):i=parseInt(d[1],10),[l,i]}function i(t,e){var n=[];return{storage:n,width:t,height:e,clip:function(){n.push({type:"function",name:"clip",arguments:arguments})},translate:function(){n.push({type:"function",name:"translate",arguments:arguments})},fill:function(){n.push({type:"function",name:"fill",arguments:arguments})},save:function(){n.push({type:"function",name:"save",arguments:arguments})},restore:function(){n.push({type:"function",name:"restore",arguments:arguments})},fillRect:function(){n.push({type:"function",name:"fillRect",arguments:arguments})},createPattern:function(){n.push({type:"function",name:"createPattern",arguments:arguments})},drawShape:function(){var t=[];return n.push({type:"function",name:"drawShape",arguments:t}),{moveTo:function(){t.push({name:"moveTo",arguments:arguments})},lineTo:function(){t.push({name:"lineTo",arguments:arguments})},arcTo:function(){t.push({name:"arcTo",arguments:arguments})},bezierCurveTo:function(){t.push({name:"bezierCurveTo",arguments:arguments})},quadraticCurveTo:function(){t.push({name:"quadraticCurveTo",arguments:arguments})}}},drawImage:function(){n.push({type:"function",name:"drawImage",arguments:arguments})},fillText:function(){n.push({type:"function",name:"fillText",arguments:arguments})},setVariable:function(t,e){return n.push({type:"variable",name:t,arguments:e}),e}}}function l(t){return{zindex:t,children:[]}}var s,c,d,u={};u.Util={},u.Util.log=function(t){u.logging&&window.console&&window.console.log&&window.console.log(t)},u.Util.trimText=function(t){return function(e){return t?t.apply(e):((e||"")+"").replace(/^\s+|\s+$/g,"")}}(String.prototype.trim),u.Util.asFloat=function(t){return parseFloat(t)},function(){var t=/((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g,e=/(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g;u.Util.parseTextShadows=function(n){if(!n||"none"===n)return[];for(var r=n.match(t),o=[],a=0;r&&a<r.length;a++){var i=r[a].match(e);o.push({color:i[0],offsetX:i[1]?i[1].replace("px",""):0,offsetY:i[2]?i[2].replace("px",""):0,blur:i[3]?i[3].replace("px",""):0})}return o}}(),u.Util.parseBackgroundImage=function(t){var e,n,r,o,a,i,l,s,c=" \r\n	",d=[],u=0,h=0,f=function(){e&&('"'===n.substr(0,1)&&(n=n.substr(1,n.length-2)),n&&s.push(n),"-"===e.substr(0,1)&&(o=e.indexOf("-",1)+1)>0&&(r=e.substr(0,o),e=e.substr(o)),d.push({prefix:r,method:e.toLowerCase(),value:a,args:s})),s=[],e=r=n=a=""};f();for(var g=0,p=t.length;p>g;g++)if(i=t[g],!(0===u&&c.indexOf(i)>-1)){switch(i){case'"':l?l===i&&(l=null):l=i;break;case"(":if(l)break;if(0===u){u=1,a+=i;continue}h++;break;case")":if(l)break;if(1===u){if(0===h){u=0,a+=i,f();continue}h--}break;case",":if(l)break;if(0===u){f();continue}if(1===u&&0===h&&!e.match(/^url$/i)){s.push(n),n="",a+=i;continue}}a+=i,0===u?e+=i:n+=i}return f(),d},u.Util.Bounds=function(t){var e,n={};return t.getBoundingClientRect&&(e=t.getBoundingClientRect(),n.top=e.top,n.bottom=e.bottom||e.top+e.height,n.left=e.left,n.width=t.offsetWidth,n.height=t.offsetHeight),n},u.Util.OffsetBounds=function(t){var e=t.offsetParent?u.Util.OffsetBounds(t.offsetParent):{top:0,left:0};return{top:t.offsetTop+e.top,bottom:t.offsetTop+t.offsetHeight+e.top,left:t.offsetLeft+e.left,width:t.offsetWidth,height:t.offsetHeight}},u.Util.getCSS=function(t,e,n){s!==t&&(c=document.defaultView.getComputedStyle(t,null));var a=c[e];if(/^background(Size|Position)$/.test(e))return o(a,t,e,n);if(/border(Top|Bottom)(Left|Right)Radius/.test(e)){var i=a.split(" ");return i.length<=1&&(i[1]=i[0]),i.map(r)}return a},u.Util.resizeBounds=function(t,e,n,r,o){var a,i,l=n/r,s=t/e;return o&&"auto"!==o?s>l^"contain"===o?(i=r,a=r*s):(a=n,i=n/s):(a=n,i=r),{width:a,height:i}},u.Util.BackgroundPosition=function(t,e,n,r,o){var i=a("backgroundPosition",t,e,n,r,o);return{left:i[0],top:i[1]}},u.Util.BackgroundSize=function(t,e,n,r){var o=a("backgroundSize",t,e,n,r);return{width:o[0],height:o[1]}},u.Util.Extend=function(t,e){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},u.Util.Children=function(t){var e;try{e=t.nodeName&&"IFRAME"===t.nodeName.toUpperCase()?t.contentDocument||t.contentWindow.document:function(t){var e=[];return null!==t&&!function(t,e){var n=t.length,r=0;if("number"==typeof e.length)for(var o=e.length;o>r;r++)t[n++]=e[r];else for(;void 0!==e[r];)t[n++]=e[r++];return t.length=n,t}(e,t),e}(t.childNodes)}catch(n){u.Util.log("html2canvas.Util.Children failed with exception: "+n.message),e=[]}return e},u.Util.isTransparent=function(t){return"transparent"===t||"rgba(0, 0, 0, 0)"===t},u.Util.Font=function(){var t={};return function(e,n,r){if(void 0!==t[e+"-"+n])return t[e+"-"+n];var o,a,i,l=r.createElement("div"),s=r.createElement("img"),c=r.createElement("span"),d="Hidden Text";return l.style.visibility="hidden",l.style.fontFamily=e,l.style.fontSize=n,l.style.margin=0,l.style.padding=0,r.body.appendChild(l),s.src="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACwAAAAAAQABAAACAkQBADs=",s.width=1,s.height=1,s.style.margin=0,s.style.padding=0,s.style.verticalAlign="baseline",c.style.fontFamily=e,c.style.fontSize=n,c.style.margin=0,c.style.padding=0,c.appendChild(r.createTextNode(d)),l.appendChild(c),l.appendChild(s),o=s.offsetTop-c.offsetTop+1,l.removeChild(c),l.appendChild(r.createTextNode(d)),l.style.lineHeight="normal",s.style.verticalAlign="super",a=s.offsetTop-l.offsetTop+1,i={baseline:o,lineWidth:1,middle:a},t[e+"-"+n]=i,r.body.removeChild(l),i}}(),function(){function t(t){return function(n){try{t.addColorStop(n.stop,n.color)}catch(r){e.log(["failed to add color stop: ",r,"; tried to add: ",n])}}}var e=u.Util,n={};u.Generate=n;var r=[/^(-webkit-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-gradient)\((linear|radial),\s((?:\d{1,3}%?)\s(?:\d{1,3}%?),\s(?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)\-]+)\)$/,/^(-moz-linear-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-moz-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s?([a-z\-]*)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/];n.parseGradient=function(t,e){var n,o,a,i,l,s,c,d,u,h,f,g,p=r.length;for(o=0;p>o&&!(a=t.match(r[o]));o+=1);if(a)switch(a[1]){case"-webkit-linear-gradient":case"-o-linear-gradient":if(n={type:"linear",x0:null,y0:null,x1:null,y1:null,colorStops:[]},l=a[2].match(/\w+/g))for(s=l.length,o=0;s>o;o+=1)switch(l[o]){case"top":n.y0=0,n.y1=e.height;break;case"right":n.x0=e.width,n.x1=0;break;case"bottom":n.y0=e.height,n.y1=0;break;case"left":n.x0=0,n.x1=e.width}if(null===n.x0&&null===n.x1&&(n.x0=n.x1=e.width/2),null===n.y0&&null===n.y1&&(n.y0=n.y1=e.height/2),l=a[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g))for(s=l.length,c=1/Math.max(s-1,1),o=0;s>o;o+=1)d=l[o].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/),d[2]?(i=parseFloat(d[2]),i/="%"===d[3]?100:e.width):i=o*c,n.colorStops.push({color:d[1],stop:i});break;case"-webkit-gradient":if(n={type:"radial"===a[2]?"circle":a[2],x0:0,y0:0,x1:0,y1:0,colorStops:[]},l=a[3].match(/(\d{1,3})%?\s(\d{1,3})%?,\s(\d{1,3})%?\s(\d{1,3})%?/),l&&(n.x0=l[1]*e.width/100,n.y0=l[2]*e.height/100,n.x1=l[3]*e.width/100,n.y1=l[4]*e.height/100),l=a[4].match(/((?:from|to|color-stop)\((?:[0-9\.]+,\s)?(?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)\))+/g))for(s=l.length,o=0;s>o;o+=1)d=l[o].match(/(from|to|color-stop)\(([0-9\.]+)?(?:,\s)?((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\)/),i=parseFloat(d[2]),"from"===d[1]&&(i=0),"to"===d[1]&&(i=1),n.colorStops.push({color:d[3],stop:i});break;case"-moz-linear-gradient":if(n={type:"linear",x0:0,y0:0,x1:0,y1:0,colorStops:[]},l=a[2].match(/(\d{1,3})%?\s(\d{1,3})%?/),l&&(n.x0=l[1]*e.width/100,n.y0=l[2]*e.height/100,n.x1=e.width-n.x0,n.y1=e.height-n.y0),l=a[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}%)?)+/g))for(s=l.length,c=1/Math.max(s-1,1),o=0;s>o;o+=1)d=l[o].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%)?/),d[2]?(i=parseFloat(d[2]),d[3]&&(i/=100)):i=o*c,n.colorStops.push({color:d[1],stop:i});break;case"-webkit-radial-gradient":case"-moz-radial-gradient":case"-o-radial-gradient":if(n={type:"circle",x0:0,y0:0,x1:e.width,y1:e.height,cx:0,cy:0,rx:0,ry:0,colorStops:[]},l=a[2].match(/(\d{1,3})%?\s(\d{1,3})%?/),l&&(n.cx=l[1]*e.width/100,n.cy=l[2]*e.height/100),l=a[3].match(/\w+/),d=a[4].match(/[a-z\-]*/),l&&d)switch(d[0]){case"farthest-corner":case"cover":case"":u=Math.sqrt(Math.pow(n.cx,2)+Math.pow(n.cy,2)),h=Math.sqrt(Math.pow(n.cx,2)+Math.pow(n.y1-n.cy,2)),f=Math.sqrt(Math.pow(n.x1-n.cx,2)+Math.pow(n.y1-n.cy,2)),g=Math.sqrt(Math.pow(n.x1-n.cx,2)+Math.pow(n.cy,2)),n.rx=n.ry=Math.max(u,h,f,g);break;case"closest-corner":u=Math.sqrt(Math.pow(n.cx,2)+Math.pow(n.cy,2)),h=Math.sqrt(Math.pow(n.cx,2)+Math.pow(n.y1-n.cy,2)),f=Math.sqrt(Math.pow(n.x1-n.cx,2)+Math.pow(n.y1-n.cy,2)),g=Math.sqrt(Math.pow(n.x1-n.cx,2)+Math.pow(n.cy,2)),n.rx=n.ry=Math.min(u,h,f,g);break;case"farthest-side":"circle"===l[0]?n.rx=n.ry=Math.max(n.cx,n.cy,n.x1-n.cx,n.y1-n.cy):(n.type=l[0],n.rx=Math.max(n.cx,n.x1-n.cx),n.ry=Math.max(n.cy,n.y1-n.cy));break;case"closest-side":case"contain":"circle"===l[0]?n.rx=n.ry=Math.min(n.cx,n.cy,n.x1-n.cx,n.y1-n.cy):(n.type=l[0],n.rx=Math.min(n.cx,n.x1-n.cx),n.ry=Math.min(n.cy,n.y1-n.cy))}if(l=a[5].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g))for(s=l.length,c=1/Math.max(s-1,1),o=0;s>o;o+=1)d=l[o].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/),d[2]?(i=parseFloat(d[2]),i/="%"===d[3]?100:e.width):i=o*c,n.colorStops.push({color:d[1],stop:i})}return n},n.Gradient=function(e,n){if(0!==n.width&&0!==n.height){var r,o,a=document.createElement("canvas"),i=a.getContext("2d");if(a.width=n.width,a.height=n.height,r=u.Generate.parseGradient(e,n))switch(r.type){case"linear":o=i.createLinearGradient(r.x0,r.y0,r.x1,r.y1),r.colorStops.forEach(t(o)),i.fillStyle=o,i.fillRect(0,0,n.width,n.height);break;case"circle":o=i.createRadialGradient(r.cx,r.cy,0,r.cx,r.cy,r.rx),r.colorStops.forEach(t(o)),i.fillStyle=o,i.fillRect(0,0,n.width,n.height);break;case"ellipse":var l=document.createElement("canvas"),s=l.getContext("2d"),c=Math.max(r.rx,r.ry),d=2*c;l.width=l.height=d,o=s.createRadialGradient(r.rx,r.ry,0,r.rx,r.ry,c),r.colorStops.forEach(t(o)),s.fillStyle=o,s.fillRect(0,0,d,d),i.fillStyle=r.colorStops[r.colorStops.length-1].color,i.fillRect(0,0,a.width,a.height),i.drawImage(l,r.cx-r.rx,r.cy-r.ry,2*r.rx,2*r.ry)}return a}},n.ListAlpha=function(t){var e,n="";do e=t%26,n=String.fromCharCode(e+64)+n,t/=26;while(26*t>26);return n},n.ListRoman=function(t){var e,n=["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"],r=[1e3,900,500,400,100,90,50,40,10,9,5,4,1],o="",a=n.length;if(0>=t||t>=4e3)return t;for(e=0;a>e;e+=1)for(;t>=r[e];)t-=r[e],o+=n[e];return o}}(),u.Parse=function(t,e){function n(){return Math.max(Math.max(le.body.scrollWidth,le.documentElement.scrollWidth),Math.max(le.body.offsetWidth,le.documentElement.offsetWidth),Math.max(le.body.clientWidth,le.documentElement.clientWidth))}function r(){return Math.max(Math.max(le.body.scrollHeight,le.documentElement.scrollHeight),Math.max(le.body.offsetHeight,le.documentElement.offsetHeight),Math.max(le.body.clientHeight,le.documentElement.clientHeight))}function o(t,e){var n=parseInt(he(t,e),10);return isNaN(n)?0:n}function a(t,e,n,r,o,a){"transparent"!==a&&(t.setVariable("fillStyle",a),t.fillRect(e,n,r,o),ie+=1)}function s(t,e,n){return t.length>0?e+n.toUpperCase():void 0}function c(t,e){switch(e){case"lowercase":return t.toLowerCase();case"capitalize":return t.replace(/(^|\s|:|-|\(|\))([a-z])/g,s);case"uppercase":return t.toUpperCase();default:return t}}function d(t){return/^(normal|none|0px)$/.test(t)}function h(t,e,n,r){null!==t&&se.trimText(t).length>0&&(r.fillText(t,e,n),ie+=1)}function f(t,e,n,r){var o=!1,a=he(e,"fontWeight"),i=he(e,"fontFamily"),l=he(e,"fontSize"),s=se.parseTextShadows(he(e,"textShadow"));switch(parseInt(a,10)){case 401:a="bold";break;case 400:a="normal"}return t.setVariable("fillStyle",r),t.setVariable("font",[he(e,"fontStyle"),he(e,"fontVariant"),a,l,i].join(" ")),t.setVariable("textAlign",o?"right":"left"),s.length&&(t.setVariable("shadowColor",s[0].color),t.setVariable("shadowOffsetX",s[0].offsetX),t.setVariable("shadowOffsetY",s[0].offsetY),t.setVariable("shadowBlur",s[0].blur)),"none"!==n?se.Font(i,l,le):void 0}function g(t,e,n,r,o){switch(e){case"underline":a(t,n.left,Math.round(n.top+r.baseline+r.lineWidth),n.width,1,o);break;case"overline":a(t,n.left,Math.round(n.top),n.width,1,o);break;case"line-through":a(t,n.left,Math.ceil(n.top+r.middle+r.lineWidth),n.width,1,o)}}function p(t,e,n,r,o){var a;if(ce.rangeBounds&&!o)("none"!==n||0!==se.trimText(e).length)&&(a=m(e,t.node,t.textOffset)),t.textOffset+=e.length;else if(t.node&&"string"==typeof t.node.nodeValue){var i=r?t.node.splitText(e.length):null;a=w(t.node,o),t.node=i}return a}function m(t,e,n){var r=le.createRange();return r.setStart(e,n),r.setEnd(e,n+t.length),r.getBoundingClientRect()}function w(t,e){var n=t.parentNode,r=le.createElement("wrapper"),o=t.cloneNode(!0);r.appendChild(t.cloneNode(!0)),n.replaceChild(r,t);var a=e?se.OffsetBounds(r):se.Bounds(r);return n.replaceChild(o,r),a}function y(t,n,r){var o,a,i=r.ctx,l=he(t,"color"),s=he(t,"textDecoration"),u=he(t,"textAlign"),m={node:n,textOffset:0};se.trimText(n.nodeValue).length>0&&(n.nodeValue=c(n.nodeValue,he(t,"textTransform")),u=u.replace(["-webkit-auto"],["auto"]),a=n.nodeValue.split(!e.letterRendering&&/^(left|right|justify|auto)$/.test(u)&&d(he(t,"letterSpacing"))?/(\b| )/:""),o=f(i,t,s,l),e.chinese&&a.forEach(function(t,e){/.*[\u4E00-\u9FA5].*$/.test(t)&&(t=t.split(""),t.unshift(e,1),a.splice.apply(a,t))}),a.forEach(function(t,e){var n=p(m,t,s,e<a.length-1,r.transform.matrix);n&&(h(t,n.left,n.bottom,i),g(i,s,n,o,l))}))}function b(t,e){var n,r,o=le.createElement("boundelement");return o.style.display="inline",n=t.style.listStyleType,t.style.listStyleType="none",o.appendChild(le.createTextNode(e)),t.insertBefore(o,t.firstChild),r=se.Bounds(o),t.removeChild(o),t.style.listStyleType=n,r}function x(t){var e=-1,n=1,r=t.parentNode.childNodes;if(t.parentNode){for(;r[++e]!==t;)1===r[e].nodeType&&n++;return n}return-1}function v(t,e){var n,r=x(t);switch(e){case"decimal":n=r;break;case"decimal-leading-zero":n=1===r.toString().length?r="0"+r.toString():r.toString();break;case"upper-roman":n=u.Generate.ListRoman(r);break;case"lower-roman":n=u.Generate.ListRoman(r).toLowerCase();break;case"lower-alpha":n=u.Generate.ListAlpha(r).toLowerCase();break;case"upper-alpha":n=u.Generate.ListAlpha(r)}return n+". "}function k(t,e,n){var r,o,a,i=e.ctx,l=he(t,"listStyleType");if(/^(decimal|decimal-leading-zero|upper-alpha|upper-latin|upper-roman|lower-alpha|lower-greek|lower-latin|lower-roman)$/i.test(l)){if(o=v(t,l),a=b(t,o),f(i,t,"none",he(t,"color")),"inside"!==he(t,"listStylePosition"))return;i.setVariable("textAlign","left"),r=n.left,h(o,r,a.bottom,i)}}function C(e){var n=t[e];return n&&n.succeeded===!0?n.img:!1}function T(t,e){var n=Math.max(t.left,e.left),r=Math.max(t.top,e.top),o=Math.min(t.left+t.width,e.left+e.width),a=Math.min(t.top+t.height,e.top+e.height);return{left:n,top:r,width:o-n,height:a-r}}function S(t,e,n){var r,o="static"!==e.cssPosition,a=o?he(t,"zIndex"):"auto",i=he(t,"opacity"),s="none"!==he(t,"cssFloat");e.zIndex=r=l(a),r.isPositioned=o,r.isFloated=s,r.opacity=i,r.ownStacking="auto"!==a||1>i,n&&n.zIndex.children.push(e)}function M(t,e,n,r,a){var i=o(e,"paddingLeft"),l=o(e,"paddingTop"),s=o(e,"paddingRight"),c=o(e,"paddingBottom");F(t,n,0,0,n.width,n.height,r.left+i+a[3].width,r.top+l+a[0].width,r.width-(a[1].width+a[3].width+i+s),r.height-(a[0].width+a[2].width+l+c))}function E(t){return["Top","Right","Bottom","Left"].map(function(e){return{width:o(t,"border"+e+"Width"),color:he(t,"border"+e+"Color")}})}function R(t){return["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(e){return he(t,"border"+e+"Radius")})}function I(t,e,n,r){var o=function(t,e,n){return{x:t.x+(e.x-t.x)*n,y:t.y+(e.y-t.y)*n}};return{start:t,startControl:e,endControl:n,end:r,subdivide:function(a){var i=o(t,e,a),l=o(e,n,a),s=o(n,r,a),c=o(i,l,a),d=o(l,s,a),u=o(c,d,a);return[I(t,i,c,u),I(u,d,s,r)]},curveTo:function(t){t.push(["bezierCurve",e.x,e.y,n.x,n.y,r.x,r.y])},curveToReversed:function(r){r.push(["bezierCurve",n.x,n.y,e.x,e.y,t.x,t.y])}}}function L(t,e,n,r,o,a,i){e[0]>0||e[1]>0?(t.push(["line",r[0].start.x,r[0].start.y]),r[0].curveTo(t),r[1].curveTo(t)):t.push(["line",a,i]),(n[0]>0||n[1]>0)&&t.push(["line",o[0].start.x,o[0].start.y])}function O(t,e,n,r,o,a,i){var l=[];return e[0]>0||e[1]>0?(l.push(["line",r[1].start.x,r[1].start.y]),r[1].curveTo(l)):l.push(["line",t.c1[0],t.c1[1]]),n[0]>0||n[1]>0?(l.push(["line",a[0].start.x,a[0].start.y]),a[0].curveTo(l),l.push(["line",i[0].end.x,i[0].end.y]),i[0].curveToReversed(l)):(l.push(["line",t.c2[0],t.c2[1]]),l.push(["line",t.c3[0],t.c3[1]])),e[0]>0||e[1]>0?(l.push(["line",o[1].end.x,o[1].end.y]),o[1].curveToReversed(l)):l.push(["line",t.c4[0],t.c4[1]]),l}function z(t,e,n){var r=t.left,o=t.top,a=t.width,i=t.height,l=e[0][0],s=e[0][1],c=e[1][0],d=e[1][1],u=e[2][0],h=e[2][1],f=e[3][0],g=e[3][1],p=a-c,m=i-h,w=a-u,y=i-g;return{topLeftOuter:pe(r,o,l,s).topLeft.subdivide(.5),topLeftInner:pe(r+n[3].width,o+n[0].width,Math.max(0,l-n[3].width),Math.max(0,s-n[0].width)).topLeft.subdivide(.5),topRightOuter:pe(r+p,o,c,d).topRight.subdivide(.5),topRightInner:pe(r+Math.min(p,a+n[3].width),o+n[0].width,p>a+n[3].width?0:c-n[3].width,d-n[0].width).topRight.subdivide(.5),bottomRightOuter:pe(r+w,o+m,u,h).bottomRight.subdivide(.5),bottomRightInner:pe(r+Math.min(w,a+n[3].width),o+Math.min(m,i+n[0].width),Math.max(0,u-n[1].width),Math.max(0,h-n[2].width)).bottomRight.subdivide(.5),bottomLeftOuter:pe(r,o+y,f,g).bottomLeft.subdivide(.5),bottomLeftInner:pe(r+n[3].width,o+y,Math.max(0,f-n[3].width),Math.max(0,g-n[2].width)).bottomLeft.subdivide(.5)}}function A(t,e,n,r,o){var a=he(t,"backgroundClip"),i=[];switch(a){case"content-box":case"padding-box":L(i,r[0],r[1],e.topLeftInner,e.topRightInner,o.left+n[3].width,o.top+n[0].width),L(i,r[1],r[2],e.topRightInner,e.bottomRightInner,o.left+o.width-n[1].width,o.top+n[0].width),L(i,r[2],r[3],e.bottomRightInner,e.bottomLeftInner,o.left+o.width-n[1].width,o.top+o.height-n[2].width),L(i,r[3],r[0],e.bottomLeftInner,e.topLeftInner,o.left+n[3].width,o.top+o.height-n[2].width);break;default:L(i,r[0],r[1],e.topLeftOuter,e.topRightOuter,o.left,o.top),L(i,r[1],r[2],e.topRightOuter,e.bottomRightOuter,o.left+o.width,o.top),L(i,r[2],r[3],e.bottomRightOuter,e.bottomLeftOuter,o.left+o.width,o.top+o.height),L(i,r[3],r[0],e.bottomLeftOuter,e.topLeftOuter,o.left,o.top+o.height)}return i}function B(t,e,n){var r,o,a,i,l,s,c=e.left,d=e.top,u=e.width,h=e.height,f=R(t),g=z(e,f,n),p={clip:A(t,g,n,f,e),borders:[]};for(r=0;4>r;r++)if(n[r].width>0){switch(o=c,a=d,i=u,l=h-n[2].width,r){case 0:l=n[0].width,s=O({c1:[o,a],c2:[o+i,a],c3:[o+i-n[1].width,a+l],c4:[o+n[3].width,a+l]},f[0],f[1],g.topLeftOuter,g.topLeftInner,g.topRightOuter,g.topRightInner);break;case 1:o=c+u-n[1].width,i=n[1].width,s=O({c1:[o+i,a],c2:[o+i,a+l+n[2].width],c3:[o,a+l],c4:[o,a+n[0].width]},f[1],f[2],g.topRightOuter,g.topRightInner,g.bottomRightOuter,g.bottomRightInner);break;case 2:a=a+h-n[2].width,l=n[2].width,s=O({c1:[o+i,a+l],c2:[o,a+l],c3:[o+n[3].width,a],c4:[o+i-n[3].width,a]},f[2],f[3],g.bottomRightOuter,g.bottomRightInner,g.bottomLeftOuter,g.bottomLeftInner);break;case 3:i=n[3].width,s=O({c1:[o,a+l+n[2].width],c2:[o,a],c3:[o+i,a+n[0].width],c4:[o+i,a+l]},f[3],f[0],g.bottomLeftOuter,g.bottomLeftInner,g.topLeftOuter,g.topLeftInner)}p.borders.push({args:s,color:n[r].color})}return p}function N(t,e){var n=t.drawShape();return e.forEach(function(t,e){n[0===e?"moveTo":t[0]+"To"].apply(null,t.slice(1))}),n}function U(t,e,n){"transparent"!==n&&(t.setVariable("fillStyle",n),N(t,e),t.fill(),ie+=1)}function P(t,e,n){var r,o,a=le.createElement("valuewrap"),i=["lineHeight","textAlign","fontFamily","color","fontSize","paddingLeft","paddingTop","width","height","border","borderLeftWidth","borderTopWidth"];i.forEach(function(e){try{a.style[e]=he(t,e)}catch(n){se.log("html2canvas: Parse: Exception caught in renderFormValue: "+n.message)}}),a.style.borderColor="black",a.style.borderStyle="solid",a.style.display="block",a.style.position="absolute",(/^(submit|reset|button|text|password)$/.test(t.type)||"SELECT"===t.nodeName)&&(a.style.lineHeight=he(t,"height")),a.style.top=e.top+"px",a.style.left=e.left+"px",r="SELECT"===t.nodeName?(t.options[t.selectedIndex]||0).text:t.value,r||(r=t.placeholder),o=le.createTextNode(r),a.appendChild(o),ue.appendChild(a),y(t,o,n),ue.removeChild(a)}function F(t){t.drawImage.apply(t,Array.prototype.slice.call(arguments,1)),ie+=1}function V(t,e){var n=window.getComputedStyle(t,e);if(n&&n.content&&"none"!==n.content&&"-moz-alt-content"!==n.content&&"none"!==n.display){var r=n.content+"",o=r.substr(0,1);o===r.substr(r.length-1)&&o.match(/'|"/)&&(r=r.substr(1,r.length-2));var a="url"===r.substr(0,3),i=document.createElement(a?"img":"span");return i.className=fe+"-before "+fe+"-after",Object.keys(n).filter(D).forEach(function(t){try{i.style[t]=n[t]}catch(e){se.log(["Tried to assign readonly property ",t,"Error:",e])}}),a?i.src=se.parseBackgroundImage(r)[0].args[0]:i.innerHTML=r,i}}function D(t){return isNaN(window.parseInt(t,10))}function $(t,e){var n=V(t,":before"),r=V(t,":after");(n||r)&&(n&&(t.className+=" "+fe+"-before",t.parentNode.insertBefore(n,t),ne(n,e,!0),t.parentNode.removeChild(n),t.className=t.className.replace(fe+"-before","").trim()),r&&(t.className+=" "+fe+"-after",t.appendChild(r),ne(r,e,!0),t.removeChild(r),t.className=t.className.replace(fe+"-after","").trim()))}function G(t,e,n,r){var o=Math.round(r.left+n.left),a=Math.round(r.top+n.top);t.createPattern(e),t.translate(o,a),t.fill(),t.translate(-o,-a)}function W(t,e,n,r,o,a,i,l){var s=[];s.push(["line",Math.round(o),Math.round(a)]),s.push(["line",Math.round(o+i),Math.round(a)]),s.push(["line",Math.round(o+i),Math.round(l+a)]),s.push(["line",Math.round(o),Math.round(l+a)]),N(t,s),t.save(),t.clip(),G(t,e,n,r),t.restore()}function H(t,e,n){a(t,e.left,e.top,e.width,e.height,n)}function j(t,e,n,r,o){var a=se.BackgroundSize(t,e,r,o),i=se.BackgroundPosition(t,e,r,o,a),l=he(t,"backgroundRepeat").split(",").map(se.trimText);switch(r=X(r,a),l=l[o]||l[0]){case"repeat-x":W(n,r,i,e,e.left,e.top+i.top,99999,r.height);break;case"repeat-y":W(n,r,i,e,e.left+i.left,e.top,r.width,99999);break;case"no-repeat":W(n,r,i,e,e.left+i.left,e.top+i.top,r.width,r.height);break;default:G(n,r,i,{top:e.top,left:e.left,width:r.width,height:r.height})}}function q(t,e,n){for(var r,o=he(t,"backgroundImage"),a=se.parseBackgroundImage(o),i=a.length;i--;)if(o=a[i],o.args&&0!==o.args.length){var l="url"===o.method?o.args[0]:o.value;r=C(l),r?j(t,e,n,r,i):se.log("html2canvas: Error loading background:",o)}}function X(t,e){if(t.width===e.width&&t.height===e.height)return t;var n,r=le.createElement("canvas");return r.width=e.width,r.height=e.height,n=r.getContext("2d"),F(n,t,0,0,t.width,t.height,0,0,e.width,e.height),r}function _(t,e,n){return t.setVariable("globalAlpha",he(e,"opacity")*(n?n.opacity:1))}function Y(t){return t.replace("px","")}function Q(t){var e=he(t,"transform")||he(t,"-webkit-transform")||he(t,"-moz-transform")||he(t,"-ms-transform")||he(t,"-o-transform"),n=he(t,"transform-origin")||he(t,"-webkit-transform-origin")||he(t,"-moz-transform-origin")||he(t,"-ms-transform-origin")||he(t,"-o-transform-origin")||"0px 0px";n=n.split(" ").map(Y).map(se.asFloat);var r;if(e&&"none"!==e){var o=e.match(me);if(o)switch(o[1]){case"matrix":r=o[2].split(",").map(se.trimText).map(se.asFloat)}}return{origin:n,matrix:r}}function J(t,o,a,l){var s=i(o?a.width:n(),o?a.height:r()),c={ctx:s,opacity:_(s,t,o),cssPosition:he(t,"position"),borders:E(t),transform:l,clip:o&&o.clip?se.Extend({},o.clip):null};return S(t,c,o),e.useOverflow===!0&&/(hidden|scroll|auto)/.test(he(t,"overflow"))===!0&&/(BODY)/i.test(t.nodeName)===!1&&(c.clip=c.clip?T(c.clip,a):a),c}function K(t,e,n){var r={left:e.left+t[3].width,top:e.top+t[0].width,width:e.width-(t[1].width+t[3].width),height:e.height-(t[0].width+t[2].width)};return n&&(r=T(r,n)),r}function Z(t,e){var n=e.matrix?se.OffsetBounds(t):se.Bounds(t);return e.origin[0]+=n.left,e.origin[1]+=n.top,n}function te(t,e,n,r){var o,a=Q(t,e),i=Z(t,a),l=J(t,e,i,a),s=l.borders,c=l.ctx,d=K(s,i,l.clip),u=B(t,i,s),h=de.test(t.nodeName)?"#efefef":he(t,"backgroundColor");switch(N(c,u.clip),c.save(),c.clip(),d.height>0&&d.width>0&&!r?(H(c,i,h),q(t,d,c)):r&&(l.backgroundColor=h),c.restore(),u.borders.forEach(function(t){U(c,t.args,t.color)}),n||$(t,l),t.nodeName){case"IMG":(o=C(t.getAttribute("src")))?M(c,t,o,i,s):se.log("html2canvas: Error loading <img>:"+t.getAttribute("src"));break;case"INPUT":/^(text|url|email|submit|button|reset)$/.test(t.type)&&(t.value||t.placeholder||"").length>0&&P(t,i,l);break;case"TEXTAREA":(t.value||t.placeholder||"").length>0&&P(t,i,l);break;case"SELECT":(t.options||t.placeholder||"").length>0&&P(t,i,l);break;case"LI":k(t,l,d);break;case"CANVAS":M(c,t,t,i,s)}return l}function ee(t){return"none"!==he(t,"display")&&"hidden"!==he(t,"visibility")&&!t.hasAttribute("data-html2canvas-ignore")}function ne(t,e,n){ee(t)&&(e=te(t,e,n,!1)||e,de.test(t.nodeName)||re(t,e,n))}function re(t,e,n){se.Children(t).forEach(function(r){r.nodeType===r.ELEMENT_NODE?ne(r,e,n):r.nodeType===r.TEXT_NODE&&y(t,r,e)})}function oe(){var t=he(document.documentElement,"backgroundColor"),e=se.isTransparent(t)&&ae===document.body,n=te(ae,null,!1,e);return re(ae,n),e&&(t=n.backgroundColor),ue.removeChild(ge),{backgroundColor:t,stack:n}}window.scroll(0,0);var ae=void 0===e.elements?document.body:e.elements[0],ie=0,le=ae.ownerDocument,se=u.Util,ce=se.Support(e,le),de=new RegExp("("+e.ignoreElements+")"),ue=le.body,he=se.getCSS,fe="___html2canvas___pseudoelement",ge=le.createElement("style");ge.innerHTML="."+fe+'-before:before { content: "" !important; display: none !important; }.'+fe+'-after:after { content: "" !important; display: none !important; }',ue.appendChild(ge),t=t||{};var pe=function(t){return function(e,n,r,o){var a=r*t,i=o*t,l=e+r,s=n+o;return{topLeft:I({x:e,y:s},{x:e,y:s-i},{x:l-a,y:n},{x:l,y:n}),topRight:I({x:e,y:n},{x:e+a,y:n},{x:l,y:s-i},{x:l,y:s}),bottomRight:I({x:l,y:n},{x:l,y:n+i},{x:e+a,y:s},{x:e,y:s}),bottomLeft:I({x:l,y:s},{x:l-a,y:s},{x:e,y:n+i},{x:e,y:n})}}}(4*((Math.sqrt(2)-1)/3)),me=/(matrix)\((.+)\)/;return oe()},u.Preload=function(t){function e(t){C.href=t,C.href=C.href;var e=C.protocol+C.host;return e===h}function n(){w.log("html2canvas: start: images: "+m.numLoaded+" / "+m.numTotal+" (failed: "+m.numFailed+")"),!m.firstRun&&m.numLoaded>=m.numTotal&&(w.log("Finished loading images: # "+m.numTotal+" (failed: "+m.numFailed+")"),"function"==typeof t.complete&&t.complete(m))}function r(e,r,o){var a,i,l=t.proxy;C.href=e,e=C.href,a="html2canvas_"+y++,o.callbackname=a,l+=l.indexOf("?")>-1?"&":"?",l+="url="+encodeURIComponent(e)+"&callback="+a,i=x.createElement("script"),window[a]=function(t){"error:"===t.substring(0,6)?(o.succeeded=!1,m.numLoaded++,m.numFailed++,n()):(d(r,o),r.src=t),window[a]=void 0;try{delete window[a]}catch(e){}i.parentNode.removeChild(i),i=null,delete o.script,delete o.callbackname},i.setAttribute("type","text/javascript"),i.setAttribute("src",l),o.script=i,window.document.body.appendChild(i)}function o(t,e){var n=window.getComputedStyle(t,e),r=n.content;"url"===r.substr(0,3)&&f.loadImage(u.Util.parseBackgroundImage(r)[0].args[0]),s(n.backgroundImage,t)}function a(t){o(t,":before"),o(t,":after")}function i(t,e){var r=u.Generate.Gradient(t,e);void 0!==r&&(m[t]={img:r,succeeded:!0},m.numTotal++,m.numLoaded++,n())}function l(t){return t&&t.method&&t.args&&t.args.length>0}function s(t,e){var n;u.Util.parseBackgroundImage(t).filter(l).forEach(function(t){"url"===t.method?f.loadImage(t.args[0]):t.method.match(/\-?gradient$/)&&(void 0===n&&(n=u.Util.Bounds(e)),i(t.value,n))})}function c(t){var e=!1;try{w.Children(t).forEach(c)}catch(n){}try{e=t.nodeType}catch(r){e=!1,w.log("html2canvas: failed to access some element's nodeType - Exception: "+r.message)}if(1===e||void 0===e){a(t);try{s(w.getCSS(t,"backgroundImage"),t)}catch(n){w.log("html2canvas: failed to get background-image - Exception: "+n.message)}s(t)}}function d(e,o){e.onload=function(){void 0!==o.timer&&window.clearTimeout(o.timer),m.numLoaded++,o.succeeded=!0,e.onerror=e.onload=null,n()},e.onerror=function(){if("anonymous"===e.crossOrigin&&(window.clearTimeout(o.timer),t.proxy)){var a=e.src;return e=new Image,o.img=e,e.src=a,void r(e.src,e,o)}m.numLoaded++,m.numFailed++,o.succeeded=!1,e.onerror=e.onload=null,n()}}var h,f,g,p,m={numLoaded:0,numFailed:0,numTotal:0,cleanupDone:!1},w=u.Util,y=0,b=t.elements[0]||document.body,x=b.ownerDocument,v=b.getElementsByTagName("img"),k=v.length,C=x.createElement("a"),T=function(t){return void 0!==t.crossOrigin}(new Image);for(C.href=window.location.href,h=C.protocol+C.host,f={loadImage:function(n){var o,a;n&&void 0===m[n]&&(o=new Image,n.match(/data:image\/.*;base64,/i)?(o.src=n.replace(/url\(['"]{0,}|['"]{0,}\)$/gi,""),a=m[n]={img:o},m.numTotal++,d(o,a)):e(n)||t.allowTaint===!0?(a=m[n]={img:o},m.numTotal++,d(o,a),o.src=n):T&&!t.allowTaint&&t.useCORS?(o.crossOrigin="anonymous",a=m[n]={img:o},m.numTotal++,d(o,a),o.src=n):t.proxy&&(a=m[n]={img:o},m.numTotal++,r(n,o,a)))},cleanupDOM:function(e){var r,o;if(!m.cleanupDone){w.log(e&&"string"==typeof e?"html2canvas: Cleanup because: "+e:"html2canvas: Cleanup after timeout: "+t.timeout+" ms.");for(o in m)if(m.hasOwnProperty(o)&&(r=m[o],"object"==typeof r&&r.callbackname&&void 0===r.succeeded)){window[r.callbackname]=void 0;try{delete window[r.callbackname]}catch(a){}r.script&&r.script.parentNode&&(r.script.setAttribute("src","about:blank"),r.script.parentNode.removeChild(r.script)),m.numLoaded++,m.numFailed++,w.log("html2canvas: Cleaned up failed img: '"+o+"' Steps: "+m.numLoaded+" / "+m.numTotal)}void 0!==window.stop?window.stop():void 0!==document.execCommand&&document.execCommand("Stop",!1),void 0!==document.close&&document.close(),m.cleanupDone=!0,e&&"string"==typeof e||n()}},renderingDone:function(){p&&window.clearTimeout(p)}},t.timeout>0&&(p=window.setTimeout(f.cleanupDOM,t.timeout)),w.log("html2canvas: Preload starts: finding background-images"),m.firstRun=!0,c(b),w.log("html2canvas: Preload: Finding images"),g=0;k>g;g+=1)f.loadImage(v[g].getAttribute("src"));
return m.firstRun=!1,w.log("html2canvas: Preload: Done."),m.numTotal===m.numLoaded&&n(),f},u.Renderer=function(t,e){function n(t){function e(t){Object.keys(t).sort().forEach(function(n){var o=[],a=[],i=[],l=[];t[n].forEach(function(t){t.node.zIndex.isPositioned||t.node.zIndex.opacity<1?i.push(t):t.node.zIndex.isFloated?a.push(t):o.push(t)}),function s(t){t.forEach(function(t){l.push(t),t.children&&s(t.children)})}(o.concat(a,i)),l.forEach(function(t){t.context?e(t.context):r.push(t.node)})})}var n,r=[];return n=function(t){function e(t,n,r){var o="auto"===n.zIndex.zindex?0:Number(n.zIndex.zindex),a=t,i=n.zIndex.isPositioned,l=n.zIndex.isFloated,s={node:n},c=r;n.zIndex.ownStacking?(a=s.context={"!":[{node:n,children:[]}]},c=void 0):(i||l)&&(c=s.children=[]),0===o&&r?r.push(s):(t[o]||(t[o]=[]),t[o].push(s)),n.zIndex.children.forEach(function(t){e(a,t,c)})}var n={};return e(n,t),n}(t),e(n),r}function r(t){var n;if("string"==typeof e.renderer&&void 0!==u.Renderer[t])n=u.Renderer[t](e);else{if("function"!=typeof t)throw new Error("Unknown renderer");n=t(e)}if("function"!=typeof n)throw new Error("Invalid renderer defined");return n}return r(e.renderer)(t,e,document,n(t.stack),u)},u.Util.Support=function(t,e){function n(){var t=new Image,n=e.createElement("canvas"),r=void 0===n.getContext?!1:n.getContext("2d");if(r===!1)return!1;n.width=n.height=10,t.src=["data:image/svg+xml,","<svg xmlns='http://www.w3.org/2000/svg' width='10' height='10'>","<foreignObject width='10' height='10'>","<div xmlns='http://www.w3.org/1999/xhtml' style='width:10;height:10;'>","sup","</div>","</foreignObject>","</svg>"].join("");try{r.drawImage(t,0,0),n.toDataURL()}catch(o){return!1}return u.Util.log("html2canvas: Parse: SVG powered rendering available"),!0}function r(){var t,n,r,o,a=!1;return e.createRange&&(t=e.createRange(),t.getBoundingClientRect&&(n=e.createElement("boundtest"),n.style.height="123px",n.style.display="block",e.body.appendChild(n),t.selectNode(n),r=t.getBoundingClientRect(),o=r.height,123===o&&(a=!0),e.body.removeChild(n))),a}return{rangeBounds:r(),svgRendering:t.svgRendering&&n()}},d=function(t,e){t=t.length?t:[t];var n,r,o={logging:!1,elements:t,background:"#fff",proxy:null,timeout:0,useCORS:!1,allowTaint:!1,svgRendering:!1,ignoreElements:"IFRAME|OBJECT|PARAM",useOverflow:!0,letterRendering:!1,chinese:!1,width:null,height:null,taintTest:!0,renderer:"Canvas"};return o=u.Util.Extend(e,o),u.logging=o.logging,o.complete=function(t){("function"!=typeof o.onpreloaded||o.onpreloaded(t)!==!1)&&(n=u.Parse(t,o),("function"!=typeof o.onparsed||o.onparsed(n)!==!1)&&(r=u.Renderer(n,o),"function"==typeof o.onrendered&&o.onrendered(r)))},window.setTimeout(function(){u.Preload(o)},0),{render:function(t,e){return u.Renderer(t,u.Util.Extend(e,o))},parse:function(t,e){return u.Parse(t,u.Util.Extend(e,o))},preload:function(t){return u.Preload(u.Util.Extend(t,o))},log:u.Util.log}},u.Renderer.Canvas=function(t){function e(t,e){t.beginPath(),e.forEach(function(e){t[e.name].apply(t,e.arguments)}),t.closePath()}function n(t){if(-1===a.indexOf(t.arguments[0].src)){l.drawImage(t.arguments[0],0,0);try{l.getImageData(0,0,1,1)}catch(e){return i=o.createElement("canvas"),l=i.getContext("2d"),!1}a.push(t.arguments[0].src)}return!0}function r(r,o){switch(o.type){case"variable":r[o.name]=o.arguments;break;case"function":switch(o.name){case"createPattern":if(o.arguments[0].width>0&&o.arguments[0].height>0)try{r.fillStyle=r.createPattern(o.arguments[0],"repeat")}catch(a){s.log("html2canvas: Renderer: Error creating pattern",a.message)}break;case"drawShape":e(r,o.arguments);break;case"drawImage":o.arguments[8]>0&&o.arguments[7]>0&&(!t.taintTest||t.taintTest&&n(o))&&r.drawImage.apply(r,o.arguments);break;default:r[o.name].apply(r,o.arguments)}}}t=t||{};var o=document,a=[],i=document.createElement("canvas"),l=i.getContext("2d"),s=u.Util,c=t.canvas||o.createElement("canvas");return function(t,e,n,o,a){var i,l,d,u=c.getContext("2d"),h=t.stack;return c.width=c.style.width=e.width||h.ctx.width,c.height=c.style.height=e.height||h.ctx.height,d=u.fillStyle,u.fillStyle=s.isTransparent(h.backgroundColor)&&void 0!==e.background?e.background:t.backgroundColor,u.fillRect(0,0,c.width,c.height),u.fillStyle=d,o.forEach(function(t){u.textBaseline="bottom",u.save(),t.transform.matrix&&(u.translate(t.transform.origin[0],t.transform.origin[1]),u.transform.apply(u,t.transform.matrix),u.translate(-t.transform.origin[0],-t.transform.origin[1])),t.clip&&(u.beginPath(),u.rect(t.clip.left,t.clip.top,t.clip.width,t.clip.height),u.clip()),t.ctx.storage&&t.ctx.storage.forEach(function(t){r(u,t)}),u.restore()}),s.log("html2canvas: Renderer: Canvas renderer done - returning canvas obj"),1===e.elements.length&&"object"==typeof e.elements[0]&&"BODY"!==e.elements[0].nodeName?(l=a.Util.Bounds(e.elements[0]),i=n.createElement("canvas"),i.width=Math.ceil(l.width),i.height=Math.ceil(l.height),u=i.getContext("2d"),u.drawImage(c,l.left,l.top,l.width,l.height,0,0,l.width,l.height),c=null,i):c}},e.html2canvas=d});